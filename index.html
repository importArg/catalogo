<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catálogo simple → pedido por WhatsApp</title>
  <meta name="description" content="Catálogo mínimo con carrito. Editá productos en el código. Imágenes locales. Envío a WhatsApp sin pago online." />
  <style>
    :root{
      --bg:#0c0f13;--card:#151923;--text:#e9eef6;--muted:#9aa4b2;--brand:#49d17d;--brand-2:#23b35e;--danger:#ff5c5c;--radius:16px;--shadow:0 10px 30px rgba(0,0,0,.35)
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b0c10,#0f1117);color:var(--text);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial}
    .container{max-width:1100px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 0 8px;position:sticky;top:0;background:linear-gradient(180deg,rgba(11,12,16,.95),rgba(11,12,16,.6));backdrop-filter:saturate(1.2) blur(6px);z-index:10}
    .logo{font-weight:800}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.08);color:var(--muted);font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .col{grid-column:span 12}
    @media(min-width:760px){.col.l-8{grid-column:span 8}.col.l-4{grid-column:span 4}}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .muted{color:var(--muted)}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px;padding:14px}
    .product{background:#0f1420;border:1px solid rgba(255,255,255,.06);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .photo{aspect-ratio:1/1;background:#0c0e13;display:grid;place-items:center;overflow:hidden}
    .photo img{width:100%;height:100%;object-fit:cover;display:block}
    .body{padding:12px;display:grid;gap:8px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .price{font-weight:800}
    .qty{display:inline-flex;align-items:center;gap:6px;background:#0d1016;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:6px}
    .qty button{background:transparent;border:0;color:var(--text);font-size:18px;width:28px;height:28px;border-radius:8px;cursor:pointer}
    .qty button:hover{background:rgba(255,255,255,.06)}
    .qty input{width:38px;text-align:center;background:transparent;border:0;color:var(--text);font-weight:700}
    .add{background:var(--brand);color:#072b16;border:0;border-radius:12px;padding:10px 12px;font-weight:800;cursor:pointer}
    .add:hover{background:var(--brand-2)}
    .cart{padding:14px;display:grid;gap:10px}
    .cart-empty{text-align:center;padding:18px;color:var(--muted)}
    .cart-item{display:grid;grid-template-columns:48px 1fr auto;gap:10px;align-items:center;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:8px;background:#0e1117}
    .cart-item img{width:48px;height:48px;object-fit:cover;border-radius:10px}
    .cart-item .t{font-weight:700}
    .cart-item .s{font-size:12px;color:var(--muted)}
    .cart-item .r{text-align:right}
    .remove{background:transparent;border:0;color:var(--danger);cursor:pointer;font-weight:800}
    .form{display:grid;gap:10px;padding:14px}
    label{font-size:13px;color:var(--muted)}
    input[type="text"],input[type="tel"],textarea,select{width:100%;background:#0d1016;color:var(--text);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px 12px;outline:none}
    textarea{min-height:80px;resize:vertical}
    .checkout{display:grid;gap:8px;padding:14px}
    .totals{display:flex;align-items:center;justify-content:space-between}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:0;border-radius:12px;padding:12px;font-weight:900;cursor:pointer}
    .btn-primary{background:var(--brand);color:#072b16}
    .btn-primary:hover{background:var(--brand-2)}
  </style>
</head>
<body>
  <header class="container">
    <div>
      <div class="logo">Catálogo <span class="pill">pedido por WhatsApp</span></div>
      <div class="muted" style="font-size:12px">Editá productos directo en el código (ver sección CONFIG). Imágenes desde tu carpeta local.</div>
    </div>
    <button id="openCart" class="btn btn-primary" title="Abrir carrito" aria-label="Abrir carrito">🛒 <span id="cartCount">0</span></button>
  </header>

  <main class="container">
    <div class="grid">
      <section class="col l-8 card">
        <div style="padding:14px 14px 0 14px" class="row"><h2 style="margin:0">Productos</h2><span class="muted">Todo sale de la lista en el código</span></div>
        <div id="products" class="products"></div>
      </section>

      <aside class="col l-4 card" id="cartPanel" aria-live="polite">
        <div style="padding:14px"><h2 style="margin:0">Tu carrito</h2></div>
        <div id="cart" class="cart"></div>
        <div class="checkout">
          <div class="totals"><span class="muted">Total</span><strong id="total">$ 0</strong></div>
          <button id="sendWA" class="btn btn-primary">📲 Enviar pedido por WhatsApp</button>
          <button id="clearCart" class="btn" style="background:transparent;border:1px dashed rgba(255,255,255,.25);color:var(--muted)">Vaciar carrito</button>
          <div class="muted" style="font-size:12px">No hay pago online. Solo se arma un mensaje listo para WhatsApp.</div>
        </div>
      </aside>
    </div>
  </main>

  <script>
    /**
     * ==========================
     * CONFIG — EDITÁ ACÁ
     * ==========================
     * 1) Poné tu WhatsApp (solo números, con país):
     */
    const SELLER_WHATSAPP = "5491155648478"; // ej: 54 + 9 + código área + número sin + ni espacios
    
    /**
     * 2) Productos:
     *   - img: ruta del archivo local (por ejemplo, "/img/remera-negra.jpg" si tenés una carpeta "img" al lado del HTML)
     *   - price_cents: precio en centavos (199000 = $1.990,00). Si preferís, podés usar price en pesos y te lo convierto.
     */
    const PRODUCTS = [
      { id: "remera-basic", name: "Remera Basic", price_cents: 259000, img: "img/remera-basic.jpg" },
      { id: "auris-x100", name: "Auriculares X100", price_cents: 459900, img: "img/auris-x100.jpg" },
      { id: "perfume-50ml", name: "Perfume 50ml", price_cents: 829000, img: "img/perfume-50ml.jpg" }
      // → copiá y pegá más líneas con tus productos
    ];

    /**
     * ==========================
     * No hace falta tocar de acá para abajo
     * ==========================
     */
    const fmt = new Intl.NumberFormat('es-AR',{style:'currency',currency:'ARS'});
    const $ = s => document.querySelector(s);
    function priceStr(cents){ return fmt.format((cents||0)/100); }

    // Estado de carrito (en memoria)
    const cart = new Map(); // key=id, value={qty, product}

    function addToCart(p, qty){
      const prev = cart.get(p.id) || { qty:0, product:p };
      prev.qty += qty; if (prev.qty < 1) prev.qty = 1;
      cart.set(p.id, prev);
      renderCart();
    }
    function setQty(id, qty){ const it = cart.get(id); if(!it) return; it.qty = Math.max(1,qty|0); renderCart(); }
    function removeFromCart(id){ cart.delete(id); renderCart(); }
    function totalCents(){ let s=0; cart.forEach(({qty,product})=> s += qty*product.price_cents); return s; }

    function renderProducts(){
      const wrap = $('#products');
      wrap.innerHTML = '';
      PRODUCTS.forEach(p=>{
        const el = document.createElement('article');
        el.className = 'product';
        el.innerHTML = `
          <div class="photo">${p.img?`<img src="${p.img}" alt="${p.name}">`:'<span class="muted">Sin imagen</span>'}</div>
          <div class="body">
            <div class="row"><h3 style="margin:0;font-size:18px">${p.name}</h3><div class="price">${priceStr(p.price_cents)}</div></div>
            <div class="row">
              <div class="qty">
                <button data-act="-">−</button>
                <input data-qty type="number" min="1" value="1" inputmode="numeric" pattern="[0-9]*" />
                <button data-act="+">+</button>
              </div>
              <button class="add">Agregar</button>
            </div>
          </div>`;
        const input = el.querySelector('[data-qty]');
        el.querySelector('[data-act="-"]').addEventListener('click',()=>{ input.value = Math.max(1, +input.value-1); });
        el.querySelector('[data-act="+"]').addEventListener('click',()=>{ input.value = +input.value+1; });
        el.querySelector('.add').addEventListener('click',()=> addToCart(p, Math.max(1, parseInt(input.value||'1',10))));
        wrap.appendChild(el);
      });
    }

    function renderCart(){
      const list = $('#cart');
      list.innerHTML = '';
      if (!cart.size){ list.innerHTML = '<div class="cart-empty">Tu carrito está vacío.</div>'; $('#total').textContent = priceStr(0); $('#cartCount').textContent = '0'; return; }
      cart.forEach(({qty,product})=>{
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img src="${product.img}" alt="${product.name}">
          <div>
            <div class="t">${product.name}</div>
            <div class="s">${priceStr(product.price_cents)} c/u</div>
            <div class="s">Cant.: <input data-qty type="number" min="1" value="${qty}" style="width:56px;background:transparent;border:1px solid rgba(255,255,255,.14);border-radius:8px;padding:4px 6px;color:var(--text)"></div>
          </div>
          <div class="r">
            <div><strong>${priceStr(qty*product.price_cents)}</strong></div>
            <button class="remove">Quitar</button>
          </div>`;
        row.querySelector('[data-qty]').addEventListener('input',e=> setQty(product.id, Math.max(1,parseInt(e.target.value||'1',10))));
        row.querySelector('.remove').addEventListener('click',()=> removeFromCart(product.id));
        list.appendChild(row);
      });
      $('#total').textContent = priceStr(totalCents());
      $('#cartCount').textContent = [...cart.values()].reduce((n,x)=>n+x.qty,0);
    }

    function deviceIsMobile(){ return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent); }
    function buildWhatsAppURL(phone, text){ const enc = encodeURIComponent(text); return deviceIsMobile()?`https://wa.me/${phone}?text=${enc}`:`https://web.whatsapp.com/send?phone=${phone}&text=${enc}`; }

    function composeMessage(){
      if (!cart.size) return '';
      const lines = [];
      lines.push('🛒 *Nuevo pedido*');
      lines.push('');
      lines.push('*Productos:*');
      cart.forEach(({qty,product})=>{
        lines.push(`• ${product.name} × ${qty} — ${priceStr(product.price_cents)} c/u — Subtotal: ${priceStr(qty*product.price_cents)}`);
      });
      lines.push('');
      lines.push(`🧾 *Total:* ${priceStr(totalCents())}`);
      lines.push('— Mensaje generado automáticamente.');
      return lines.join('\n');
    }

    // Botones
    document.getElementById('sendWA').addEventListener('click',()=>{
      if (!cart.size){ alert('Tu carrito está vacío.'); return; }
      if (!SELLER_WHATSAPP){ alert('Falta configurar SELLER_WHATSAPP.'); return; }
      window.open(buildWhatsAppURL(SELLER_WHATSAPP, composeMessage()), '_blank');
    });
    document.getElementById('clearCart').addEventListener('click',()=>{ if (confirm('¿Vaciar el carrito?')){ cart.clear(); renderCart(); } });
    document.getElementById('openCart').addEventListener('click',()=> document.getElementById('cartPanel').scrollIntoView({behavior:'smooth',block:'start'}));

    // Init
    renderProducts();
    renderCart();
  </script>
</body>
</html>
